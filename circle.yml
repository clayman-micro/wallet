machine:
  timezone:
    Asia/Yekaterinburg

  python:
    version: 3.5.0

  node:
    version: 4.1.0

test:
  override:
    - pip install coveralls
    - DB_USER=ubuntu DB_NAME=circle_test coverage run --source=wallet setup.py test -a "tests -vv"
    - coveralls
    - deactivate
    - cd web && npm install && npm install -g webpack && npm test

general:
  artifacts:
    - "dist/"
    - "tests/coverage/"

#deployment:
#  production:
#    branch: master
#    commands:
#      - deactivate
#      - ~/.pyenv/versions/2.7/bin/pip install ansible
#
#      - touch inventory
#      - echo "[wallet]" > inventory
#      - echo "essential ansible_ssh_host=clayman.pro ansible_ssh_user=clayman" >> inventory
#      - echo "[wallet:vars]" >> inventory
#      - echo "project_branch=master" >> inventory
#      - echo "project_user=clayman" >> inventory
#
#      - ~/.pyenv/versions/2.7/bin/ansible-playbook -i inventory playbooks/deploy.yml
